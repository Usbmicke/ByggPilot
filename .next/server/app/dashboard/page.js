(()=>{var e={};e.id=702,e.ids=[702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},63437:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>h,tree:()=>c}),r(38256),r(22834),r(15495),r(35866);var a=r(23191),s=r(88716),o=r(37922),n=r.n(o),l=r(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,38256)),"/workspaces/ByggPilot/src/app/dashboard/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,22834)),"/workspaces/ByggPilot/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,15495)),"/workspaces/ByggPilot/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],u=["/workspaces/ByggPilot/src/app/dashboard/page.tsx"],d="/dashboard/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},27732:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},72827:(e,t,r)=>{Promise.resolve().then(r.bind(r,75287))},49291:(e,t,r)=>{Promise.resolve().then(r.bind(r,84326))},45011:(e,t,r)=>{Promise.resolve().then(r.bind(r,69755))},54095:e=>{"use strict";let t="undefined"!=typeof Buffer,r=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,a=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function s(e,s,n){null==n&&null!==s&&"object"==typeof s&&(n=s,s=void 0),t&&Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let l=JSON.parse(e,s);if(null===l||"object"!=typeof l)return l;let i=n&&n.protoAction||"error",c=n&&n.constructorAction||"error";if("ignore"===i&&"ignore"===c)return l;if("ignore"!==i&&"ignore"!==c){if(!1===r.test(e)&&!1===a.test(e))return l}else if("ignore"!==i&&"ignore"===c){if(!1===r.test(e))return l}else if(!1===a.test(e))return l;return o(l,{protoAction:i,constructorAction:c,safe:n&&n.safe})}function o(e,{protoAction:t="error",constructorAction:r="error",safe:a}={}){let s=[e];for(;s.length;){let e=s;for(let o of(s=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(!0===a)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(!0===a)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let e in o){let t=o[e];t&&"object"==typeof t&&s.push(t)}}}return e}function n(e,t,r){let a=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return s(e,t,r)}finally{Error.stackTraceLimit=a}}e.exports=n,e.exports.default=n,e.exports.parse=n,e.exports.safeParse=function(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return s(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=r}},e.exports.scan=o},68301:e=>{e.exports=function(e,t){let r;if("function"!=typeof e)throw TypeError(`Expected the first argument to be a \`function\`, got \`${typeof e}\`.`);let a=0;return function(...s){clearTimeout(r);let o=Date.now(),n=t-(o-a);n<=0?(a=o,e.apply(this,s)):r=setTimeout(()=>{a=Date.now(),e.apply(this,s)},n)}}},65442:(e,t,r)=>{"use strict";var a=r(17577),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=a.useState,n=a.useEffect,l=a.useLayoutEffect,i=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=o({inst:{value:r,getSnapshot:t}}),s=a[0].inst,u=a[1];return l(function(){s.value=r,s.getSnapshot=t,c(s)&&u({inst:s})},[e,r,t]),n(function(){return c(s)&&u({inst:s}),e(function(){c(s)&&u({inst:s})})},[e]),i(r),r};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:u},94095:(e,t,r)=>{"use strict";e.exports=r(65442)},52792:(e,t,r)=>{"use strict";r.d(t,{H:()=>i,a:()=>c});var a=r(10326),s=r(17577),o=r(46791),n=r(86342);let l=(0,s.createContext)(void 0),i=({children:e})=>{let[t,r]=(0,s.useState)(null),[i,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,o.Aj)(n.I,async e=>{if(r(e),c(!1),e)try{let t=await e.getIdToken(!0);await fetch("/api/auth/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:t})}),console.log("Session cookie created successfully.")}catch(e){console.error("Failed to create session cookie:",e)}});return()=>e()},[]);let u=async()=>{c(!0);let e=new o.hJ;e.addScope("https://www.googleapis.com/auth/drive"),e.addScope("https://www.googleapis.com/auth/calendar"),e.addScope("https://www.googleapis.com/auth/gmail.readonly");try{await (0,o.rh)(n.I,e)}catch(e){console.error("Popup login failed:",e),c(!1)}},d=async()=>{await (0,o.w7)(n.I);try{await fetch("/api/auth/signout",{method:"POST"}),console.log("Session cookie cleared successfully.")}catch(e){console.error("Failed to clear session cookie:",e)}};return a.jsx(l.Provider,{value:{user:t,loading:i,login:u,logout:d},children:e})},c=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},84326:(e,t,r)=>{"use strict";let a,s,o;r.r(t),r.d(t,{default:()=>tf});var n,l,i,c,u=r(10326),d=r(52792),p=r(17577);let h=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),g=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),f=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),m=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),x=()=>(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.096 2.572-1.065z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),v=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.546-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),b=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),y=()=>{let{logout:e}=(0,d.a)();return(0,u.jsxs)("aside",{className:"w-64 bg-secondary-bg border-r border-border-color p-6 flex-col hidden md:flex",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 mb-10",children:[u.jsx("img",{src:"/byggpilot-logga-vit.png",alt:"ByggPilot Logotyp",className:"h-8 w-auto"}),u.jsx("span",{className:"font-bold text-xl",children:"ByggPilot"})]}),u.jsx("nav",{className:"flex-grow",children:(0,u.jsxs)("ul",{className:"space-y-2",children:[u.jsx("li",{children:(0,u.jsxs)("a",{href:"#",className:"flex items-center gap-3 px-4 py-2 rounded-md bg-card-background-color text-text-color font-semibold transition-all",children:[u.jsx(h,{})," \xd6versikt"]})}),u.jsx("li",{children:(0,u.jsxs)("a",{href:"#",className:"flex items-center gap-3 px-4 py-2 rounded-md hover:bg-card-background-color text-text-muted hover:text-text-color hover:shadow-glow transition-all",children:[u.jsx(g,{})," Projekt"]})}),u.jsx("li",{children:(0,u.jsxs)("a",{onClick:()=>window.open("https://drive.google.com","_blank"),className:"cursor-pointer flex items-center gap-3 px-4 py-2 rounded-md hover:bg-card-background-color text-text-muted hover:text-text-color hover:shadow-glow transition-all",children:[u.jsx(m,{})," Dokument"]})}),u.jsx("li",{children:(0,u.jsxs)("a",{href:"#",className:"flex items-center gap-3 px-4 py-2 rounded-md hover:bg-card-background-color text-text-muted hover:text-text-color hover:shadow-glow transition-all",children:[u.jsx(f,{})," Kunder"]})})]})}),(0,u.jsxs)("div",{className:"pt-4 border-t border-border-color space-y-2",children:[(0,u.jsxs)("a",{href:"#",className:"flex items-center gap-3 px-4 py-2 rounded-md hover:bg-card-background-color text-text-muted hover:text-text-color hover:shadow-glow transition-all",children:[u.jsx(x,{})," Inst\xe4llningar"]}),(0,u.jsxs)("a",{href:"#",className:"flex items-center gap-3 px-4 py-2 rounded-md hover:bg-card-background-color text-text-muted hover:text-text-color hover:shadow-glow transition-all",children:[u.jsx(v,{})," Hj\xe4lp & Guider"]}),(0,u.jsxs)("button",{onClick:e,className:"flex items-center w-full gap-3 px-4 py-2 rounded-md hover:bg-red-500/20 text-text-muted hover:text-text-color hover:shadow-glow transition-all",children:[u.jsx(b,{})," Logga ut"]})]})]})},w=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),k=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),j=()=>{let{user:e,logout:t}=(0,d.a)();return u.jsx("header",{className:"flex-shrink-0 flex justify-end items-center py-3 px-6 bg-secondary-bg border-b border-border-color",children:(0,u.jsxs)("div",{className:"flex items-center gap-4",children:[(0,u.jsxs)("button",{onClick:()=>console.log("Skapa Nytt klickad!"),className:"bg-card-background-color text-text-color font-bold py-2 px-4 rounded-md flex items-center transition-all hover:bg-gray-600",children:[u.jsx(k,{})," Skapa Nytt"]}),(0,u.jsxs)("button",{className:"relative p-2 hover:bg-card-background-color rounded-full hover:shadow-glow transition-all",children:[u.jsx(w,{}),u.jsx("span",{className:"absolute top-2 right-2 block h-2 w-2 rounded-full bg-red-500"})]}),(0,u.jsxs)("div",{className:"relative group",children:[(0,u.jsxs)("button",{className:"flex items-center gap-3 p-2 hover:bg-card-background-color rounded-md",children:[e?.photoURL?u.jsx("img",{src:e.photoURL,alt:"Profilbild",className:"h-8 w-8 rounded-full"}):u.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-accent-color flex items-center justify-center text-text-dark font-bold",children:e?.displayName?.charAt(0)||e?.email?.charAt(0)}),u.jsx("span",{className:"hidden md:block",children:e?.displayName||"G\xe4st"})]}),(0,u.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-card-background-color border border-border-color rounded-md shadow-lg py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:[u.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-text-muted hover:bg-secondary-bg hover:text-text-color",children:"Inst\xe4llningar"}),u.jsx("button",{onClick:t,className:"w-full text-left block px-4 py-2 text-sm text-text-muted hover:bg-secondary-bg hover:text-text-color",children:"Logga ut"})]})]})]})})};var E=r(35047),I="vercel.ai.error",_=Symbol.for(I),N=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[n]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,I)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}};n=_;var S=N;function T(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}Symbol.for("vercel.ai.error.AI_APICallError"),Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError");var A="AI_InvalidArgumentError",C=`vercel.ai.error.${A}`,R=Symbol.for(C),D=class extends S{constructor({message:e,cause:t,argument:r}){super({name:A,message:e,cause:t}),this[l]=!0,this.argument=r}static isInstance(e){return S.hasMarker(e,C)}};l=R,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var O="AI_JSONParseError",L=`vercel.ai.error.${O}`,P=Symbol.for(L),M=class extends S{constructor({text:e,cause:t}){super({name:O,message:`JSON parsing failed: Text: ${e}.
Error message: ${T(t)}`,cause:t}),this[i]=!0,this.text=e}static isInstance(e){return S.hasMarker(e,L)}};i=P,Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var B="AI_TypeValidationError",F=`vercel.ai.error.${B}`,V=Symbol.for(F),q=class e extends S{constructor({value:e,cause:t}){super({name:B,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${T(t)}`,cause:t}),this[c]=!0,this.value=e}static isInstance(e){return S.hasMarker(e,F)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}};function J(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(J):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&J(t)))}c=V,Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError");let $=(e,t=21)=>(r=t)=>{let a="",s=0|r;for(;s--;)a+=e[Math.random()*e.length|0];return a};var U=r(54095),W=(({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}={})=>{let s=$(r,t);if(null==e)return s;if(r.includes(a))throw new D({argument:"separator",message:`The separator "${a}" must not be part of the alphabet "${r}".`});return t=>`${e}${a}${s(t)}`})(),G=Symbol.for("vercel.ai.validator");function Y({text:e,schema:t}){try{let r=U.parse(e);if(null==t)return{success:!0,value:r,rawValue:r};let a=function({value:e,schema:t}){let r="object"==typeof t&&null!==t&&G in t&&!0===t[G]&&"validate"in t?t:{[G]:!0,validate:e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}};try{if(null==r.validate)return{success:!0,value:e};let t=r.validate(e);if(t.success)return t;return{success:!1,error:q.wrap({value:e,cause:t.error})}}catch(t){return{success:!1,error:q.wrap({value:e,cause:t})}}}({value:r,schema:t});return a.success?{...a,rawValue:r}:a}catch(t){return{success:!1,error:M.isInstance(t)?t:new M({text:e,cause:t})}}}var{btoa:z,atob:H}=globalThis;Symbol("Let zodToJsonSchema decide on which parser to use");var K={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},Z={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},Q={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},X={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},ee={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}};K.code,Z.code,Q.code,X.code,ee.code,K.name,K.code,Z.name,Z.code,Q.name,Q.code,X.name,X.code,ee.name,ee.code,[K,Z,Q,X,ee].map(e=>e.code);var et=[{code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},{code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},{code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},{code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},{code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},{code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},{code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},{code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},{code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},{code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},{code:"f",name:"start_step",parse:e=>{if(null==e||"object"!=typeof e||!("messageId"in e)||"string"!=typeof e.messageId)throw Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},{code:"g",name:"reasoning",parse:e=>{if("string"!=typeof e)throw Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},{code:"h",name:"source",parse:e=>{if(null==e||"object"!=typeof e)throw Error('"source" parts expect a Source object.');return{type:"source",value:e}}},{code:"i",name:"redacted_reasoning",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data)throw Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},{code:"j",name:"reasoning_signature",parse:e=>{if(null==e||"object"!=typeof e||!("signature"in e)||"string"!=typeof e.signature)throw Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},{code:"k",name:"file",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data||!("mimeType"in e)||"string"!=typeof e.mimeType)throw Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}}],er=Object.fromEntries(et.map(e=>[e.code,e]));Object.fromEntries(et.map(e=>[e.name,e.code]));var ea=et.map(e=>e.code),es=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!ea.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let a=JSON.parse(e.slice(t+1));return er[r].parse(a)};async function eo({stream:e,onTextPart:t,onReasoningPart:r,onReasoningSignaturePart:a,onRedactedReasoningPart:s,onSourcePart:o,onFilePart:n,onDataPart:l,onErrorPart:i,onToolCallStreamingStartPart:c,onToolCallDeltaPart:u,onToolCallPart:d,onToolResultPart:p,onMessageAnnotationsPart:h,onFinishMessagePart:g,onFinishStepPart:f,onStartStepPart:m}){let x=e.getReader(),v=new TextDecoder,b=[],y=0;for(;;){let{value:e}=await x.read();if(e&&(b.push(e),y+=e.length,10!==e[e.length-1]))continue;if(0===b.length)break;let w=function(e,t){let r=new Uint8Array(t),a=0;for(let t of e)r.set(t,a),a+=t.length;return e.length=0,r}(b,y);for(let{type:e,value:x}of(y=0,v.decode(w,{stream:!0}).split("\n").filter(e=>""!==e).map(es)))switch(e){case"text":await (null==t?void 0:t(x));break;case"reasoning":await (null==r?void 0:r(x));break;case"reasoning_signature":await (null==a?void 0:a(x));break;case"redacted_reasoning":await (null==s?void 0:s(x));break;case"file":await (null==n?void 0:n(x));break;case"source":await (null==o?void 0:o(x));break;case"data":await (null==l?void 0:l(x));break;case"error":await (null==i?void 0:i(x));break;case"message_annotations":await (null==h?void 0:h(x));break;case"tool_call_streaming_start":await (null==c?void 0:c(x));break;case"tool_call_delta":await (null==u?void 0:u(x));break;case"tool_call":await (null==d?void 0:d(x));break;case"tool_result":await (null==p?void 0:p(x));break;case"finish_message":await (null==g?void 0:g(x));break;case"finish_step":await (null==f?void 0:f(x));break;case"start_step":await (null==m?void 0:m(x));break;default:throw Error(`Unknown stream part type: ${e}`)}}}async function en({stream:e,update:t,onToolCall:r,onFinish:a,generateId:s=W,getCurrentDate:o=()=>new Date,lastMessage:n}){var l,i;let c,u,d;let p=(null==n?void 0:n.role)==="assistant",h=p?1+(null!=(i=null==(l=n.toolInvocations)?void 0:l.reduce((e,t)=>{var r;return Math.max(e,null!=(r=t.step)?r:0)},0))?i:0):0,g=p?structuredClone(n):{id:s(),createdAt:o(),role:"assistant",content:"",parts:[]};function f(e,t){let r=g.parts.find(t=>"tool-invocation"===t.type&&t.toolInvocation.toolCallId===e);null!=r?r.toolInvocation=t:g.parts.push({type:"tool-invocation",toolInvocation:t})}let m=[],x=p?null==n?void 0:n.annotations:void 0,v={},b={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},y="unknown";function w(){let e=[...m];(null==x?void 0:x.length)&&(g.annotations=x),t({message:{...structuredClone(g),revisionId:s()},data:e,replaceLastMessage:p})}await eo({stream:e,onTextPart(e){null==c?(c={type:"text",text:e},g.parts.push(c)):c.text+=e,g.content+=e,w()},onReasoningPart(e){var t;null==d?(d={type:"text",text:e},null!=u&&u.details.push(d)):d.text+=e,null==u?(u={type:"reasoning",reasoning:e,details:[d]},g.parts.push(u)):u.reasoning+=e,g.reasoning=(null!=(t=g.reasoning)?t:"")+e,w()},onReasoningSignaturePart(e){null!=d&&(d.signature=e.signature)},onRedactedReasoningPart(e){null==u&&(u={type:"reasoning",reasoning:"",details:[]},g.parts.push(u)),u.details.push({type:"redacted",data:e.data}),d=void 0,w()},onFilePart(e){g.parts.push({type:"file",mimeType:e.mimeType,data:e.data}),w()},onSourcePart(e){g.parts.push({type:"source",source:e}),w()},onToolCallStreamingStartPart(e){null==g.toolInvocations&&(g.toolInvocations=[]),v[e.toolCallId]={text:"",step:h,toolName:e.toolName,index:g.toolInvocations.length};let t={state:"partial-call",step:h,toolCallId:e.toolCallId,toolName:e.toolName,args:void 0};g.toolInvocations.push(t),f(e.toolCallId,t),w()},onToolCallDeltaPart(e){let t=v[e.toolCallId];t.text+=e.argsTextDelta;let{value:r}=function(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=Y({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Y({text:function(e){let t=["ROOT"],r=-1,a=null;function s(e,s,o){switch(e){case'"':r=s,t.pop(),t.push(o),t.push("INSIDE_STRING");break;case"f":case"t":case"n":r=s,a=s,t.pop(),t.push(o),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(o),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=s,t.pop(),t.push(o),t.push("INSIDE_NUMBER");break;case"{":r=s,t.pop(),t.push(o),t.push("INSIDE_OBJECT_START");break;case"[":r=s,t.pop(),t.push(o),t.push("INSIDE_ARRAY_START")}}function o(e,a){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":r=a,t.pop()}}function n(e,a){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=a,t.pop()}}for(let l=0;l<e.length;l++){let i=e[l];switch(t[t.length-1]){case"ROOT":s(i,l,"FINISH");break;case"INSIDE_OBJECT_START":switch(i){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":r=l,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===i&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===i&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===i&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":s(i,l,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":o(i,l);break;case"INSIDE_STRING":switch(i){case'"':t.pop(),r=l;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:r=l}break;case"INSIDE_ARRAY_START":"]"===i?(r=l,t.pop()):(r=l,s(i,l,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(i){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=l,t.pop();break;default:r=l}break;case"INSIDE_ARRAY_AFTER_COMMA":s(i,l,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),r=l;break;case"INSIDE_NUMBER":switch(i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=l;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&n(i,l),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&o(i,l);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&o(i,l);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&n(i,l);break;default:t.pop()}break;case"INSIDE_LITERAL":{let s=e.substring(a,l+1);"false".startsWith(s)||"true".startsWith(s)||"null".startsWith(s)?r=l:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?o(i,l):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&n(i,l))}}}let l=e.slice(0,r+1);for(let r=t.length-1;r>=0;r--)switch(t[r]){case"INSIDE_STRING":l+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":l+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":l+="]";break;case"INSIDE_LITERAL":{let t=e.substring(a,e.length);"true".startsWith(t)?l+="true".slice(t.length):"false".startsWith(t)?l+="false".slice(t.length):"null".startsWith(t)&&(l+="null".slice(t.length))}}return l}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}(t.text),a={state:"partial-call",step:t.step,toolCallId:e.toolCallId,toolName:t.toolName,args:r};g.toolInvocations[t.index]=a,f(e.toolCallId,a),w()},async onToolCallPart(e){let t={state:"call",step:h,...e};if(null!=v[e.toolCallId]?g.toolInvocations[v[e.toolCallId].index]=t:(null==g.toolInvocations&&(g.toolInvocations=[]),g.toolInvocations.push(t)),f(e.toolCallId,t),w(),r){let t=await r({toolCall:e});if(null!=t){let r={state:"result",step:h,...e,result:t};g.toolInvocations[g.toolInvocations.length-1]=r,f(e.toolCallId,r),w()}}},onToolResultPart(e){let t=g.toolInvocations;if(null==t)throw Error("tool_result must be preceded by a tool_call");let r=t.findIndex(t=>t.toolCallId===e.toolCallId);if(-1===r)throw Error("tool_result must be preceded by a tool_call with the same toolCallId");let a={...t[r],state:"result",...e};t[r]=a,f(e.toolCallId,a),w()},onDataPart(e){m.push(...e),w()},onMessageAnnotationsPart(e){null==x?x=[...e]:x.push(...e),w()},onFinishStepPart(e){h+=1,c=e.isContinued?c:void 0,u=void 0,d=void 0},onStartStepPart(e){p||(g.id=e.messageId),g.parts.push({type:"step-start"}),w()},onFinishMessagePart(e){y=e.finishReason,null!=e.usage&&(b=function({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}(e.usage))},onErrorPart(e){throw Error(e)}}),null==a||a({message:g,finishReason:y,usage:b})}async function el({stream:e,onTextPart:t}){let r=e.pipeThrough(new TextDecoderStream).getReader();for(;;){let{done:e,value:a}=await r.read();if(e)break;await t(a)}}async function ei({stream:e,update:t,onFinish:r,getCurrentDate:a=()=>new Date,generateId:s=W}){let o={type:"text",text:""},n={id:s(),createdAt:a(),role:"assistant",content:"",parts:[o]};await el({stream:e,onTextPart:e=>{n.content+=e,o.text+=e,t({message:{...n},data:[],replaceLastMessage:!1})}}),null==r||r(n,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"})}var ec=()=>fetch;async function eu({api:e,body:t,streamProtocol:r="data",credentials:a,headers:s,abortController:o,restoreMessagesOnFailure:n,onResponse:l,onUpdate:i,onFinish:c,onToolCall:u,generateId:d,fetch:p=ec(),lastMessage:h,requestType:g="generate"}){var f,m,x;let v="resume"===g?p(`${e}?chatId=${t.id}`,{method:"GET",headers:{"Content-Type":"application/json",...s},signal:null==(f=null==o?void 0:o())?void 0:f.signal,credentials:a}):p(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...s},signal:null==(m=null==o?void 0:o())?void 0:m.signal,credentials:a}),b=await v.catch(e=>{throw n(),e});if(l)try{await l(b)}catch(e){throw e}if(!b.ok)throw n(),Error(null!=(x=await b.text())?x:"Failed to fetch the chat response.");if(!b.body)throw Error("The response body is empty.");switch(r){case"text":await ei({stream:b.body,update:i,onFinish:c,generateId:d});return;case"data":await en({stream:b.body,update:i,lastMessage:h,onToolCall:u,onFinish({message:e,finishReason:t,usage:r}){c&&null!=e&&c(e,{usage:r,finishReason:t})},generateId:d});return;default:throw Error(`Unknown stream protocol: ${r}`)}}function ed(e){return null==e?void 0:e.reduce((e,t)=>{var r;return Math.max(e,null!=(r=t.step)?r:0)},0)}function ep(e){var t;return null!=(t=e.parts)?t:[...e.toolInvocations?e.toolInvocations.map(e=>({type:"tool-invocation",toolInvocation:e})):[],...e.reasoning?[{type:"reasoning",reasoning:e.reasoning,details:[{type:"text",text:e.reasoning}]}]:[],...e.content?[{type:"text",text:e.content}]:[]]}function eh(e){return e.map(e=>({...e,parts:ep(e)}))}async function eg(e){if(!e)return[];if(globalThis.FileList&&e instanceof globalThis.FileList)return Promise.all(Array.from(e).map(async e=>{let{name:t,type:r}=e;return{name:t,contentType:r,url:await new Promise((t,r)=>{let a=new FileReader;a.onload=e=>{var r;t(null==(r=e.target)?void 0:r.result)},a.onerror=e=>r(e),a.readAsDataURL(e)})}}));if(Array.isArray(e))return e;throw Error("Invalid attachments type")}function ef(e){if("assistant"!==e.role)return!1;let t=e.parts.reduce((e,t,r)=>"step-start"===t.type?r:e,-1),r=e.parts.slice(t+1).filter(e=>"tool-invocation"===e.type);return r.length>0&&r.every(e=>"result"in e.toolInvocation)}Symbol.for("vercel.ai.schema");var em=r(94095),ex=Object.prototype.hasOwnProperty;let ev=new WeakMap,eb=()=>{},ey=eb(),ew=Object,ek=e=>e===ey,ej=e=>"function"==typeof e,eE=(e,t)=>({...e,...t}),eI=e=>ej(e.then),e_={},eN={},eS="undefined"!=typeof document,eT=()=>!1,eA=(e,t)=>{let r=ev.get(e);return[()=>!ek(t)&&e.get(t)||e_,a=>{if(!ek(t)){let s=e.get(t);t in eN||(eN[t]=s),r[5](t,eE(s,a),s||e_)}},r[6],()=>!ek(t)&&t in eN?eN[t]:!ek(t)&&e.get(t)||e_]},eC=!0,[eR,eD]=[eb,eb],eO={initFocus:e=>(eS&&document.addEventListener("visibilitychange",e),eR("focus",e),()=>{eS&&document.removeEventListener("visibilitychange",e),eD("focus",e)}),initReconnect:e=>{let t=()=>{eC=!0,e()},r=()=>{eC=!1};return eR("online",t),eR("offline",r),()=>{eD("online",t),eD("offline",r)}}},eL=!p.useId,eP=e=>eT()?window.requestAnimationFrame(e):setTimeout(e,1),eM=(0,p.useEffect),eB="undefined"!=typeof navigator&&navigator.connection,eF=false,eV=new WeakMap,eq=e=>ew.prototype.toString.call(e),eJ=(e,t)=>e===`[object ${t}]`,e$=0,eU=e=>{let t,r;let a=typeof e,s=eq(e),o=eJ(s,"Date"),n=eJ(s,"RegExp"),l=eJ(s,"Object");if(ew(e)!==e||o||n)t=o?e.toJSON():"symbol"==a?e.toString():"string"==a?JSON.stringify(e):""+e;else{if(t=eV.get(e))return t;if(t=++e$+"~",eV.set(e,t),Array.isArray(e)){for(r=0,t="@";r<e.length;r++)t+=eU(e[r])+",";eV.set(e,t)}if(l){t="#";let a=ew.keys(e).sort();for(;!ek(r=a.pop());)ek(e[r])||(t+=r+":"+eU(e[r])+",");eV.set(e,t)}}return t},eW=e=>{if(ej(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?eU(e):"",t]},eG=0,eY=()=>++eG;async function ez(...e){let[t,r,a,s]=e,o=eE({populateCache:!0,throwOnError:!0},"boolean"==typeof s?{revalidate:s}:s||{}),n=o.populateCache,l=o.rollbackOnError,i=o.optimisticData,c=e=>"function"==typeof l?l(e):!1!==l,u=o.throwOnError;if(ej(r)){let e=[];for(let a of t.keys())!/^\$(inf|sub)\$/.test(a)&&r(t.get(a)._k)&&e.push(a);return Promise.all(e.map(d))}return d(r);async function d(r){let s;let[l]=eW(r);if(!l)return;let[d,p]=eA(t,l),[h,g,f,m]=ev.get(t),x=()=>{let e=h[l];return(ej(o.revalidate)?o.revalidate(d().data,r):!1!==o.revalidate)&&(delete f[l],delete m[l],e&&e[0])?e[0](2).then(()=>d().data):d().data};if(e.length<3)return x();let v=a,b=!1,y=eY();g[l]=[y,0];let w=!ek(i),k=d(),j=k.data,E=k._c,I=ek(E)?j:E;if(w&&p({data:i=ej(i)?i(I,j):i,_c:I}),ej(v))try{v=v(I)}catch(e){s=e,b=!0}if(v&&eI(v)){if(v=await v.catch(e=>{s=e,b=!0}),y!==g[l][0]){if(b)throw s;return v}b&&w&&c(s)&&(n=!0,p({data:I,_c:ey}))}if(n&&!b&&(ej(n)?p({data:n(v,I),error:ey,_c:ey}):p({data:v,error:ey,_c:ey})),g[l][1]=eY(),Promise.resolve(x()).then(()=>{p({_c:ey})}),b){if(u)throw s;return}return v}}let eH=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},eK=(e,t)=>{if(!ev.has(e)){let r=eE(eO,t),a=Object.create(null),s=ez.bind(ey,e),o=eb,n=Object.create(null),l=(e,t)=>{let r=n[e]||[];return n[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},i=(t,r,a)=>{e.set(t,r);let s=n[t];if(s)for(let e of s)e(r,a)},c=()=>{!ev.has(e)&&ev.set(e,[a,Object.create(null),Object.create(null),Object.create(null),s,i,l])};return c(),[e,s,c,o]}return[e,ev.get(e)[4]]},[eZ,eQ]=eK(new Map),eX=eE({onLoadingSlow:eb,onSuccess:eb,onError:eb,onErrorRetry:(e,t,r,a,s)=>{let o=r.errorRetryCount,n=s.retryCount,l=~~((Math.random()+.5)*(1<<(n<8?n:8)))*r.errorRetryInterval;(ek(o)||!(n>o))&&setTimeout(a,l,s)},onDiscarded:eb,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:eF?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:eF?5e3:3e3,compare:function e(t,r){var a,s;if(t===r)return!0;if(t&&r&&(a=t.constructor)===r.constructor){if(a===Date)return t.getTime()===r.getTime();if(a===RegExp)return t.toString()===r.toString();if(a===Array){if((s=t.length)===r.length)for(;s--&&e(t[s],r[s]););return -1===s}if(!a||"object"==typeof t){for(a in s=0,t)if(ex.call(t,a)&&++s&&!ex.call(r,a)||!(a in r)||!e(t[a],r[a]))return!1;return Object.keys(r).length===s}}return t!=t&&r!=r},isPaused:()=>!1,cache:eZ,mutate:eQ,fallback:{}},{isOnline:()=>eC,isVisible:()=>{let e=eS&&document.visibilityState;return ek(e)||"hidden"!==e}}),e0=(e,t)=>{let r=eE(e,t);if(t){let{use:a,fallback:s}=e,{use:o,fallback:n}=t;a&&o&&(r.use=a.concat(o)),s&&n&&(r.fallback=eE(s,n))}return r},e1=(0,p.createContext)({}),e2=[],e3=e=>ej(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],e4=()=>eE(eX,(0,p.useContext)(e1)),e6=e2.concat(e=>(t,r,a)=>{let s=r&&((...e)=>{let[a]=eW(t),[,,,s]=ev.get(eZ);if(a.startsWith("$inf$"))return r(...e);let o=s[a];return ek(o)?r(...e):(delete s[a],o)});return e(t,s,a)}),e5=(e,t,r)=>{let a=t[e]||(t[e]=[]);return a.push(r),()=>{let e=a.indexOf(r);e>=0&&(a[e]=a[a.length-1],a.pop())}},e7=()=>{};e7(),new WeakMap;let e8=p.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),e9={dedupe:!0};ew.defineProperty(e=>{let{value:t}=e,r=(0,p.useContext)(e1),a=ej(t),s=(0,p.useMemo)(()=>a?t(r):t,[a,r,t]),o=(0,p.useMemo)(()=>a?s:e0(r,s),[a,r,s]),n=s&&s.provider,l=(0,p.useRef)(ey);n&&!l.current&&(l.current=eK(n(o.cache||eZ),s));let i=l.current;return i&&(o.cache=i[0],o.mutate=i[1]),eM(()=>{if(i)return i[2]&&i[2](),i[3]},[]),(0,p.createElement)(e1.Provider,eE(e,{value:o}))},"defaultValue",{value:eX});let te=(o=(e,t,r)=>{let{cache:a,compare:s,suspense:o,fallbackData:n,revalidateOnMount:l,revalidateIfStale:i,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=r,[g,f,m,x]=ev.get(a),[v,b]=eW(e),y=(0,p.useRef)(!1),w=(0,p.useRef)(!1),k=(0,p.useRef)(v),j=(0,p.useRef)(t),E=(0,p.useRef)(r),I=()=>E.current,_=()=>I().isVisible()&&I().isOnline(),[N,S,T,A]=eA(a,v),C=(0,p.useRef)({}).current,R=ek(n)?ek(r.fallback)?ey:r.fallback[v]:n,D=(e,t)=>{for(let r in C)if("data"===r){if(!s(e[r],t[r])&&(!ek(e[r])||!s(J,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},O=(0,p.useMemo)(()=>{let e=!!v&&!!t&&(ek(l)?!I().isPaused()&&!o&&!1!==i:l),r=t=>{let r=eE(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},a=N(),s=A(),n=r(a),c=a===s?n:r(s),u=n;return[()=>{let e=r(N());return D(e,u)?(u.data=e.data,u.isLoading=e.isLoading,u.isValidating=e.isValidating,u.error=e.error,u):(u=e,e)},()=>c]},[a,v]),L=(0,em.useSyncExternalStore)((0,p.useCallback)(e=>T(v,(t,r)=>{D(r,t)||e()}),[a,v]),O[0],O[1]),P=!y.current,M=g[v]&&g[v].length>0,B=L.data,F=ek(B)?R&&eI(R)?e8(R):R:B,V=L.error,q=(0,p.useRef)(F),J=h?ek(B)?ek(q.current)?F:q.current:B:F,$=(!M||!!ek(V))&&(P&&!ek(l)?l:!I().isPaused()&&(o?!ek(F)&&i:ek(F)||i)),U=!!(v&&t&&P&&$),W=ek(L.isValidating)?U:L.isValidating,G=ek(L.isLoading)?U:L.isLoading,Y=(0,p.useCallback)(async e=>{let t,a;let o=j.current;if(!v||!o||w.current||I().isPaused())return!1;let n=!0,l=e||{},i=!m[v]||!l.dedupe,c=()=>eL?!w.current&&v===k.current&&y.current:v===k.current,u={isValidating:!1,isLoading:!1},d=()=>{S(u)},p=()=>{let e=m[v];e&&e[1]===a&&delete m[v]},h={isValidating:!0};ek(N().data)&&(h.isLoading=!0);try{if(i&&(S(h),r.loadingTimeout&&ek(N().data)&&setTimeout(()=>{n&&c()&&I().onLoadingSlow(v,r)},r.loadingTimeout),m[v]=[o(b),eY()]),[t,a]=m[v],t=await t,i&&setTimeout(p,r.dedupingInterval),!m[v]||m[v][1]!==a)return i&&c()&&I().onDiscarded(v),!1;u.error=ey;let e=f[v];if(!ek(e)&&(a<=e[0]||a<=e[1]||0===e[1]))return d(),i&&c()&&I().onDiscarded(v),!1;let l=N().data;u.data=s(l,t)?l:t,i&&c()&&I().onSuccess(t,v,r)}catch(r){p();let e=I(),{shouldRetryOnError:t}=e;!e.isPaused()&&(u.error=r,i&&c()&&(e.onError(r,v,e),(!0===t||ej(t)&&t(r))&&(!I().revalidateOnFocus||!I().revalidateOnReconnect||_())&&e.onErrorRetry(r,v,e,e=>{let t=g[v];t&&t[0]&&t[0](3,e)},{retryCount:(l.retryCount||0)+1,dedupe:!0})))}return n=!1,d(),!0},[v,a]),z=(0,p.useCallback)((...e)=>ez(a,k.current,...e),[]);if(eM(()=>{j.current=t,E.current=r,ek(B)||(q.current=B)}),eM(()=>{if(!v)return;let e=Y.bind(ey,e9),t=0;I().revalidateOnFocus&&(t=Date.now()+I().focusThrottleInterval);let r=e5(v,g,(r,a={})=>{if(0==r){let r=Date.now();I().revalidateOnFocus&&r>t&&_()&&(t=r+I().focusThrottleInterval,e())}else if(1==r)I().revalidateOnReconnect&&_()&&e();else if(2==r)return Y();else if(3==r)return Y(a)});return w.current=!1,k.current=v,y.current=!0,S({_k:b}),$&&!m[v]&&(ek(F),e()),()=>{w.current=!0,r()}},[v]),eM(()=>{let e;function t(){let t=ej(c)?c(N().data):c;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!N().error&&(u||I().isVisible())&&(d||I().isOnline())?Y(e9).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[c,u,d,v]),(0,p.useDebugValue)(J),o&&ek(F)&&v){if(!eL)throw Error("Fallback data is required when using Suspense in SSR.");j.current=t,E.current=r,w.current=!1;let e=x[v];if(ek(e)||e8(z(e)),ek(V)){let e=Y(e9);ek(J)||(e.status="fulfilled",e.value=!0),e8(e)}else throw V}return{mutate:z,get data(){return C.data=!0,J},get error(){return C.error=!0,V},get isValidating(){return C.isValidating=!0,W},get isLoading(){return C.isLoading=!0,G}}},function(...e){let t=e4(),[r,a,s]=e3(e),n=e0(t,s),l=o,{use:i}=n,c=(i||[]).concat(e6);for(let e=c.length;e--;)l=c[e](l);return l(r,a||n.fetcher||null,n)});var tt=r(68301);function tr(e,t){return null!=t?tt(e,t):e}var ta=function({api:e="/api/chat",id:t,initialMessages:r,initialInput:a="",sendExtraMessageFields:s,onToolCall:o,experimental_prepareRequestBody:n,maxSteps:l=1,streamProtocol:i="data",onResponse:c,onFinish:u,onError:d,credentials:h,headers:g,body:f,generateId:m=W,fetch:x,keepLastMessageOnError:v=!0,experimental_throttle:b}={}){let[y]=(0,p.useState)(m),w=null!=t?t:y,k="string"==typeof e?[e,w]:w,j=function(e){let[t,r]=(0,p.useState)(e);return(0,p.useEffect)(()=>{!function e(t,r){if(t===r)return!0;if(null==t||null==r)return!1;if("object"!=typeof t&&"object"!=typeof r)return t===r;if(t.constructor!==r.constructor)return!1;if(t instanceof Date&&r instanceof Date)return t.getTime()===r.getTime();if(Array.isArray(t)){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(!e(t[a],r[a]))return!1;return!0}let a=Object.keys(t),s=Object.keys(r);if(a.length!==s.length)return!1;for(let o of a)if(!s.includes(o)||!e(t[o],r[o]))return!1;return!0}(e,t)&&r(e)},[e,t]),t}(null!=r?r:[]),{data:E,mutate:I}=te([k,"messages"],null,{fallbackData:(0,p.useMemo)(()=>eh(j),[j])}),_=(0,p.useRef)(E||[]);(0,p.useEffect)(()=>{_.current=E||[]},[E]);let{data:N,mutate:S}=te([k,"streamData"],null),T=(0,p.useRef)(N);(0,p.useEffect)(()=>{T.current=N},[N]);let{data:A="ready",mutate:C}=te([k,"status"],null),{data:R,mutate:D}=te([k,"error"],null),O=(0,p.useRef)(null),L=(0,p.useRef)({credentials:h,headers:g,body:f});(0,p.useEffect)(()=>{L.current={credentials:h,headers:g,body:f}},[h,g,f]);let P=(0,p.useCallback)(async(t,r="generate")=>{var a,p;C("submitted"),D(void 0);let h=eh(t.messages),g=h.length,f=ed(null==(a=h[h.length-1])?void 0:a.toolInvocations);try{let a=new AbortController;O.current=a;let l=tr(I,b),d=tr(S,b),g=_.current;l(h,!1);let f=s?h:h.map(({role:e,content:t,experimental_attachments:r,data:a,annotations:s,toolInvocations:o,parts:n})=>({role:e,content:t,...void 0!==r&&{experimental_attachments:r},...void 0!==a&&{data:a},...void 0!==s&&{annotations:s},...void 0!==o&&{toolInvocations:o},...void 0!==n&&{parts:n}})),y=T.current;await eu({api:e,body:null!=(p=null==n?void 0:n({id:w,messages:h,requestData:t.data,requestBody:t.body}))?p:{id:w,messages:f,data:t.data,...L.current.body,...t.body},streamProtocol:i,credentials:L.current.credentials,headers:{...L.current.headers,...t.headers},abortController:()=>O.current,restoreMessagesOnFailure(){v||l(g,!1)},onResponse:c,onUpdate({message:e,data:t,replaceLastMessage:r}){C("streaming"),l([...r?h.slice(0,h.length-1):h,e],!1),(null==t?void 0:t.length)&&d([...null!=y?y:[],...t],!1)},onToolCall:o,onFinish:u,generateId:m,fetch:x,lastMessage:h[h.length-1],requestType:r}),O.current=null,C("ready")}catch(e){if("AbortError"===e.name)return O.current=null,C("ready"),null;d&&e instanceof Error&&d(e),D(e),C("error")}let y=_.current;(function({originalMaxToolInvocationStep:e,originalMessageCount:t,maxSteps:r,messages:a}){var s;let o=a[a.length-1];return r>1&&null!=o&&(a.length>t||ed(o.toolInvocations)!==e)&&ef(o)&&(null!=(s=ed(o.toolInvocations))?s:0)<r})({originalMaxToolInvocationStep:f,originalMessageCount:g,maxSteps:l,messages:y})&&await P({messages:y})},[I,C,e,L,c,u,d,D,S,T,i,s,n,o,l,_,O,m,x,v,b,w]),M=(0,p.useCallback)(async(e,{data:t,headers:r,body:a,experimental_attachments:s=e.experimental_attachments}={})=>{var o,n;let l=await eg(s);return P({messages:_.current.concat({...e,id:null!=(o=e.id)?o:m(),createdAt:null!=(n=e.createdAt)?n:new Date,experimental_attachments:l.length>0?l:void 0,parts:ep(e)}),headers:r,body:a,data:t})},[P,m]),B=(0,p.useCallback)(async({data:e,headers:t,body:r}={})=>{let a=_.current;return 0===a.length?null:P({messages:"assistant"===a[a.length-1].role?a.slice(0,-1):a,headers:t,body:r,data:e})},[P]),F=(0,p.useCallback)(()=>{O.current&&(O.current.abort(),O.current=null)},[]),V=(0,p.useCallback)(async()=>{P({messages:_.current},"resume")},[P]),q=(0,p.useCallback)(e=>{"function"==typeof e&&(e=e(_.current));let t=eh(e);I(t,!1),_.current=t},[I]),J=(0,p.useCallback)(e=>{"function"==typeof e&&(e=e(T.current)),S(e,!1),T.current=e},[S]),[$,U]=(0,p.useState)(a),G=(0,p.useCallback)(async(e,t={},r)=>{var a;if(null==(a=null==e?void 0:e.preventDefault)||a.call(e),!$&&!t.allowEmptySubmit)return;r&&(L.current={...L.current,...r});let s=await eg(t.experimental_attachments);P({messages:_.current.concat({id:m(),createdAt:new Date,role:"user",content:$,experimental_attachments:s.length>0?s:void 0,parts:[{type:"text",text:$}]}),headers:t.headers,body:t.body,data:t.data}),U("")},[$,m,P]),Y=(0,p.useCallback)(({toolCallId:e,result:t})=>{let r=_.current;(function({messages:e,toolCallId:t,toolResult:r}){var a;let s=e[e.length-1],o=s.parts.find(e=>"tool-invocation"===e.type&&e.toolInvocation.toolCallId===t);if(null==o)return;let n={...o.toolInvocation,state:"result",result:r};o.toolInvocation=n,s.toolInvocations=null==(a=s.toolInvocations)?void 0:a.map(e=>e.toolCallId===t?n:e)})({messages:r,toolCallId:e,toolResult:t}),I([...r.slice(0,r.length-1),{...r[r.length-1]}],!1),"submitted"!==A&&"streaming"!==A&&ef(r[r.length-1])&&P({messages:r})},[I,A,P]);return{messages:null!=E?E:[],id:w,setMessages:q,data:N,setData:J,error:R,append:M,reload:B,stop:F,experimental_resume:V,input:$,setInput:U,handleInputChange:e=>{U(e.target.value)},handleSubmit:G,isLoading:"submitted"===A||"streaming"===A,status:A,addToolResult:Y}},ts=r(6005);function to(e=21){var t;t=e|=0,!a||a.length<t?(a=Buffer.allocUnsafe(128*t),ts.webcrypto.getRandomValues(a),s=0):s+t>a.length&&(ts.webcrypto.getRandomValues(a),s=0),s+=t;let r="";for(let t=s-e;t<s;t++)r+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&a[t]];return r}let tn=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),tl=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),ti=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-14 0m7 8v3m0 0H9m3 0h3m-3-3a3 3 0 01-3-3V6a3 3 0 016 0v5a3 3 0 01-3 3z"})}),tc=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),tu=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),td=({text:e})=>u.jsx("div",{className:"chat-message user ml-auto bg-primary-accent text-text-dark rounded-xl p-3 max-w-[85%]",children:u.jsx("p",{children:e})}),tp=({children:e,append:t,user:r})=>{let a=async e=>{if(t({id:to(),role:"user",content:e}),"Ja, ge beh\xf6righet"===e){t({id:to(),role:"assistant",content:"Ok, jag skickar dig till Google f\xf6r att godk\xe4nna anslutningen. Vi ses snart igen!"}),window.location.href="/api/auth/google";return}if("Ja, skapa mappstruktur"===e)try{if(!r)throw Error("Anv\xe4ndare inte inloggad.");let e=await r.getIdToken();t({id:to(),role:"assistant",content:"Ok, jag p\xe5b\xf6rjar skapandet av mappstrukturen. Detta kan ta en liten stund..."});let a=await fetch("/api/create-drive-structure",{method:"POST",headers:{Authorization:`Bearer ${e}`}}),s=await a.json();if(!a.ok)throw Error(s.details||"N\xe5got gick fel p\xe5 servern.");t({id:to(),role:"assistant",content:"Klart! Jag har skapat din nya mappstruktur i Google Drive. Du hittar den under 'ByggPilot - "+(r.displayName||"Ditt F\xf6retag")+"'. \xc4r du redo att skapa ditt f\xf6rsta projekt?\n[Ja, skapa ett nytt projekt]\n[Nej, jag \xe4r klar f\xf6r nu]"})}catch(r){console.error("Fel vid skapande av mappstruktur:",r);let e=r instanceof Error?r.message:"Ok\xe4nt fel";t({id:to(),role:"assistant",content:`Urs\xe4kta, jag kunde inte skapa mappstrukturen. Fel: ${e}`})}};return u.jsx("div",{className:"chat-message ai mr-auto bg-card-background-color text-text-color rounded-xl p-3 max-w-[85%] whitespace-pre-wrap",children:"string"==typeof e?e.split(/\[([^\]]+)\]/g).map((e,t)=>t%2==1?u.jsx("button",{onClick:()=>a(e),className:"block w-full text-left bg-white/10 hover:bg-white/20 p-3 my-2 rounded-lg transition-colors",children:e},t):u.jsx("p",{className:"inline",children:e},t)):e})},th=()=>(0,u.jsxs)("div",{className:"chat-message ai mr-auto bg-card-background-color text-text-color rounded-xl p-3 max-w-[85%] flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 bg-primary-accent rounded-full animate-pulse",style:{animationDelay:"0s"}}),u.jsx("div",{className:"w-2 h-2 bg-primary-accent rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),u.jsx("div",{className:"w-2 h-2 bg-primary-accent rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}),tg=()=>{let{user:e}=(0,d.a)(),[t,r]=(0,p.useState)(!1),{messages:a,input:s,handleInputChange:o,handleSubmit:n,isLoading:l,setMessages:i,append:c}=ta({api:"/api/chat",body:{demo:!e},onError:e=>{console.error("Fel fr\xe5n useChat-hook:",e)}}),h=(0,E.usePathname)(),g=(0,p.useRef)(null),f=(0,p.useRef)(null);return(0,p.useEffect)(()=>{t&&f.current?.focus()},[t]),(0,p.useEffect)(()=>{g.current?.scrollIntoView({behavior:"smooth"})},[a]),(0,p.useEffect)(()=>{let t=sessionStorage.getItem("hasSeenOnboarding");e&&!t&&0===a.length&&(sessionStorage.setItem("hasSeenOnboarding","true"),setTimeout(()=>{c({id:to(),role:"assistant",content:"V\xe4lkommen! F\xf6r att jag ska kunna agera som din digitala kollega och automatisera uppgifter i ditt Google Workspace beh\xf6ver jag din till\xe5telse att komma \xe5t Google Drive, Gmail och Kalender."})},500),setTimeout(()=>{c({id:to(),role:"assistant",content:"\xc4r du redo att ge mig den beh\xf6righeten?\n[Ja, ge beh\xf6righet]\n[Nej tack, inte nu]"}),r(!0)},1500))},[e,a.length,c]),u.jsx("div",{id:"chat-drawer",className:`${"/"===h?"fixed":"sticky"} bottom-0 left-0 right-0 bg-secondary-bg border-t border-border-color z-10 flex flex-col transition-height duration-300 ease-in-out ${t?"h-full":"h-[95px]"}`,children:(0,u.jsxs)("div",{className:"flex-grow overflow-hidden flex flex-col",children:[t&&(0,u.jsxs)("div",{className:"flex justify-between items-center p-2 border-b border-border-color",children:[u.jsx("h3",{className:"text-lg font-semibold pl-4",children:"Chatt"}),(0,u.jsxs)("button",{onClick:()=>{i([]),r(!0)},className:"icon-btn p-2 flex items-center gap-2 text-sm",children:[u.jsx(tu,{}),"Ny chatt"]})]}),(0,u.jsxs)("div",{id:"chat-messages",className:`flex-grow overflow-y-auto p-4 space-y-4 ${t?"block":"hidden"}`,children:[0!==a.length||l?a.map(t=>u.jsx("div",{children:"user"===t.role?u.jsx(td,{text:t.content}):u.jsx(tp,{append:c,user:e,children:t.content})},t.id)):(0,u.jsxs)("div",{className:"welcome-message text-center p-8 text-text-muted",children:[u.jsx("h3",{className:"font-semibold text-lg",children:"V\xe4lkommen till ByggPilot"}),u.jsx("p",{children:"Din digitala kollega i byggbranschen. St\xe4ll en fr\xe5ga f\xf6r att b\xf6rja."})]}),l&&u.jsx(th,{}),u.jsx("div",{ref:g})]}),(0,u.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.trim()&&n(e)},className:"chat-input-wrapper p-4 border-t border-white/10 mt-auto",children:[(0,u.jsxs)("div",{className:"chat-input-container bg-card-background-color border border-border-color rounded-full p-1 flex items-center gap-2 focus-within:border-primary-accent",children:[u.jsx("button",{type:"button",onClick:()=>r(!t),className:`icon-btn p-2 transition-transform duration-300 ${t?"":"animate-pulse"}`,style:{transform:t?"rotate(180deg)":"none"},children:u.jsx(tn,{})}),e&&(0,u.jsxs)(u.Fragment,{children:[u.jsx("button",{type:"button",className:"icon-btn p-2",children:u.jsx(tl,{})}),u.jsx("button",{type:"button",className:"icon-btn p-2",children:u.jsx(ti,{})})]}),u.jsx("input",{ref:f,type:"text",id:"chat-input",placeholder:"Fr\xe5ga ByggPilot...",className:"flex-grow bg-transparent border-none outline-none text-text-color text-base p-2",value:s,onChange:o,onFocus:()=>r(!0)}),u.jsx("button",{type:"submit",className:"btn-send bg-primary-accent text-text-dark rounded-full w-10 h-10 grid place-items-center disabled:bg-border-color disabled:cursor-not-allowed",disabled:!s.trim()||l,children:u.jsx(tc,{})})]}),u.jsx("div",{className:`chat-disclaimer text-xs text-text-muted text-center pt-3 ${t?"block":"hidden"}`,children:e?"ByggPilot kan ge felaktiga f\xf6rslag. Granska alltid viktig information.":"Detta \xe4r en demo. Logga in f\xf6r att l\xe5sa upp alla funktioner och ansluta till ditt Google-konto."})]})]})})};function tf({children:e}){return(0,u.jsxs)("div",{className:"flex h-screen bg-background-color text-text-color font-poppins overflow-hidden",children:[u.jsx(y,{}),(0,u.jsxs)("div",{className:"flex-1 flex flex-col",children:[u.jsx(j,{}),(0,u.jsxs)("div",{className:"flex-1 relative overflow-y-auto",children:[u.jsx("main",{className:"p-6 md:p-10 pb-[95px]",children:e}),u.jsx(tg,{})]})]})]})}},69755:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(10326);r(17577);let s=({name:e,customer:t,status:r,progress:s,nextEvent:o})=>{let n={"I fas":{color:"border-status-green",text:"text-status-green"},"Beh\xf6ver tillsyn":{color:"border-status-yellow",text:"text-status-yellow"},Kritisk:{color:"border-status-red",text:"text-status-red"}};return(0,a.jsxs)("div",{className:`bg-card-background-color p-4 rounded-lg shadow-lg border-l-4 ${n[r].color} flex flex-col gap-3 transition-all hover:transform hover:-translate-y-1 hover:shadow-glow cursor-pointer`,children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-bold text-md",children:e}),a.jsx("p",{className:"text-text-muted text-sm",children:t})]}),a.jsx("p",{className:`font-semibold text-sm ${n[r].text}`,children:r})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1 text-sm",children:[a.jsx("span",{className:"text-text-muted",children:"Framsteg"}),(0,a.jsxs)("span",{children:[s,"%"]})]}),a.jsx("div",{className:"w-full bg-secondary-bg rounded-full h-2.5",children:a.jsx("div",{className:"bg-primary-accent-color h-2.5 rounded-full",style:{width:`${s}%`}})})]}),(0,a.jsxs)("p",{className:"text-sm text-text-muted mt-1",children:[a.jsx("span",{className:"font-semibold",children:"N\xe4sta:"})," ",o]})]})};var o=r(52792);let n=()=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),l=()=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),i=({title:e,children:t})=>(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold mb-4",children:e}),a.jsx("div",{className:"bg-card-background-color p-6 rounded-lg shadow-lg",children:t})]}),c=()=>{let{user:e}=(0,o.a)(),t=e?.displayName||"";return(0,a.jsxs)("div",{className:"text-center mb-10",children:[a.jsx(n,{}),a.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Du har inget som kr\xe4ver din omedelbara uppm\xe4rksamhet."}),(0,a.jsxs)("p",{className:"text-text-muted",children:["Snyggt jobbat",t?", "+t:"","!"]})]})},u=()=>(0,a.jsxs)(i,{title:"Att G\xf6ra",children:[(0,a.jsxs)("ul",{className:"space-y-3",children:[(0,a.jsxs)("li",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded mr-3"})," Ring kund f\xf6r Villa Bj\xf6rkhem"]}),(0,a.jsxs)("li",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded mr-3"})," Best\xe4ll virke"]})]}),(0,a.jsxs)("button",{className:"text-primary-accent-color mt-4 flex items-center",children:[a.jsx(l,{})," L\xe4gg till uppgift"]})]}),d=()=>a.jsx(i,{title:"Mina Projekt",children:(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(s,{name:"Villa Altanbygge",customer:"Anna Andersson",status:"I fas",progress:75,nextEvent:"Slutbesiktning 2025-08-20"}),a.jsx(s,{name:"Garageuppfart",customer:"BRF Solgl\xe4ntan",status:"Beh\xf6ver tillsyn",progress:20,nextEvent:"V\xe4ntar p\xe5 kundbesked"}),a.jsx(s,{name:"Fasadm\xe5lning",customer:"Erik Nilsson",status:"Kritisk",progress:90,nextEvent:"Slutfaktura f\xf6rsenad"})]})}),p=()=>a.jsx(i,{title:"Senaste H\xe4ndelser",children:(0,a.jsxs)("ul",{className:"space-y-4",children:[a.jsx("li",{className:"text-sm text-text-muted",children:'\uD83D\uDCE7 Nytt mail fr\xe5n "Kalle Svensson"'}),a.jsx("li",{className:"text-sm text-text-muted",children:' Mappstruktur skapad f\xf6r "Garageuppfart"'}),a.jsx("li",{className:"text-sm text-text-muted",children:'\uD83D\uDCC5 P\xe5minnelse tillagd: "Ring leverant\xf6r"'})]})}),h=()=>(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(c,{})," ",a.jsx(u,{})," ",a.jsx(d,{})," ",a.jsx(p,{})," "]}),g=()=>a.jsx("div",{className:"flex-1 p-6 md:p-10",children:a.jsx(h,{})})},75287:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>c});var a=r(10326),s=r(52792),o=r(35047);r(17577);let n=["/dashboard"],l=["/"];function i({children:e}){let{user:t,loading:r}=(0,s.a)();(0,o.useRouter)();let i=(0,o.usePathname)();return r?a.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-background-color text-text-color",children:"Laddar..."}):!t&&n.includes(i)||t&&l.includes(i)?null:a.jsx(a.Fragment,{children:e})}function c({children:e}){return a.jsx(s.H,{children:a.jsx(i,{children:e})})}},86342:(e,t,r)=>{"use strict";let a,s;r.d(t,{I:()=>s});var o=r(42585),n=r(46791),l=r(76);a=(0,o.C6)().length?(0,o.Mq)():(0,o.ZF)({apiKey:"AIzaSyCx5NZTK6qPpj_WQpismfs92-klcxC0-Lc",authDomain:"digi-dan.firebaseapp.com",projectId:"digi-dan",storageBucket:"digi-dan.firebasestorage.app",messagingSenderId:"975739376169",appId:"1:975739376169:web:44422ef57244eeb3a3c238"}),s=(0,n.v0)(a),(0,l.ad)(a)},22834:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`/workspaces/ByggPilot/src/app/dashboard/layout.tsx#default`)},38256:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`/workspaces/ByggPilot/src/app/dashboard/page.tsx#default`)},15495:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>l});var a=r(19510),s=r(45317),o=r.n(s);r(5023);let n=(0,r(68570).createProxy)(String.raw`/workspaces/ByggPilot/src/app/providers.tsx#Providers`),l={title:"ByggPilot",description:"Generated by create next app"};function i({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:o().className,children:a.jsx(n,{children:e})})})}},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,134],()=>r(63437));module.exports=a})();