(()=>{var e={};e.id=453,e.ids=[453],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},11357:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>l,routeModule:()=>x,tree:()=>u}),r(77455),r(15495),r(35866);var s=r(23191),i=r(88716),o=r(37922),a=r.n(o),n=r(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);r.d(t,c);let u=["",{children:["auth",{children:["callback",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,77455)),"/workspaces/ByggPilot/src/app/auth/callback/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,15495)),"/workspaces/ByggPilot/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],l=["/workspaces/ByggPilot/src/app/auth/callback/page.tsx"],d="/auth/callback/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/auth/callback/page",pathname:"/auth/callback",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},27732:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},72827:(e,t,r)=>{Promise.resolve().then(r.bind(r,75287))},21697:(e,t,r)=>{Promise.resolve().then(r.bind(r,98795))},52792:(e,t,r)=>{"use strict";r.d(t,{H:()=>c,a:()=>u});var s=r(10326),i=r(17577),o=r(46791),a=r(86342);let n=(0,i.createContext)(void 0),c=({children:e})=>{let[t,r]=(0,i.useState)(null),[c,u]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=(0,o.Aj)(a.I,async e=>{if(r(e),u(!1),e)try{let t=await e.getIdToken(!0);await fetch("/api/auth/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:t})}),console.log("Session cookie created successfully.")}catch(e){console.error("Failed to create session cookie:",e)}});return()=>e()},[]);let l=async()=>{u(!0);let e=new o.hJ;e.addScope("https://www.googleapis.com/auth/drive"),e.addScope("https://www.googleapis.com/auth/calendar"),e.addScope("https://www.googleapis.com/auth/gmail.readonly");try{await (0,o.rh)(a.I,e)}catch(e){console.error("Popup login failed:",e),u(!1)}},d=async()=>{await (0,o.w7)(a.I);try{await fetch("/api/auth/signout",{method:"POST"}),console.log("Session cookie cleared successfully.")}catch(e){console.error("Failed to clear session cookie:",e)}};return s.jsx(n.Provider,{value:{user:t,loading:c,login:l,logout:d},children:e})},u=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},98795:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(10326),i=r(17577),o=r(35047);function a(){return(0,o.useRouter)(),(0,o.useSearchParams)().get("token"),s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 text-white",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:"text-xl",children:"Loggar in och ansluter till Google..."}),s.jsx("div",{className:"mt-4 w-16 h-16 border-4 border-dashed rounded-full animate-spin border-cyan-400 mx-auto"})]})})}function n(){return s.jsx(i.Suspense,{fallback:s.jsx("div",{children:"Loading..."}),children:s.jsx(a,{})})}r(46791),r(86342)},75287:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>u});var s=r(10326),i=r(52792),o=r(35047);r(17577);let a=["/dashboard"],n=["/"];function c({children:e}){let{user:t,loading:r}=(0,i.a)();(0,o.useRouter)();let c=(0,o.usePathname)();return r?s.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-background-color text-text-color",children:"Laddar..."}):!t&&a.includes(c)||t&&n.includes(c)?null:s.jsx(s.Fragment,{children:e})}function u({children:e}){return s.jsx(i.H,{children:s.jsx(c,{children:e})})}},86342:(e,t,r)=>{"use strict";let s,i;r.d(t,{I:()=>i});var o=r(42585),a=r(46791),n=r(76);s=(0,o.C6)().length?(0,o.Mq)():(0,o.ZF)({apiKey:"AIzaSyCx5NZTK6qPpj_WQpismfs92-klcxC0-Lc",authDomain:"digi-dan.firebaseapp.com",projectId:"digi-dan",storageBucket:"digi-dan.firebasestorage.app",messagingSenderId:"975739376169",appId:"1:975739376169:web:44422ef57244eeb3a3c238"}),i=(0,a.v0)(s),(0,n.ad)(s)},77455:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/workspaces/ByggPilot/src/app/auth/callback/page.tsx#default`)},15495:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>n});var s=r(19510),i=r(45317),o=r.n(i);r(5023);let a=(0,r(68570).createProxy)(String.raw`/workspaces/ByggPilot/src/app/providers.tsx#Providers`),n={title:"ByggPilot",description:"Generated by create next app"};function c({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:o().className,children:s.jsx(a,{children:e})})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,134],()=>r(11357));module.exports=s})();