(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7497:function(e,t,n){Promise.resolve().then(n.t.bind(n,9974,23)),Promise.resolve().then(n.t.bind(n,2778,23)),Promise.resolve().then(n.bind(n,7524))},9376:function(e,t,n){"use strict";var r=n(5475);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},2351:function(e,t,n){"use strict";n.d(t,{H:function(){return i},a:function(){return u}});var r=n(7437),s=n(2265),o=n(3301),a=n(307);let c=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[n,i]=(0,s.useState)(null),[u,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,o.Aj)(a.I,async e=>{if(i(e),l(!1),e)try{let t=await e.getIdToken(!0);await fetch("/api/auth/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:t})}),console.log("Session cookie created successfully.")}catch(e){console.error("Failed to create session cookie:",e)}});return()=>e()},[]);let d=async()=>{l(!0);let e=new o.hJ;e.addScope("https://www.googleapis.com/auth/drive"),e.addScope("https://www.googleapis.com/auth/calendar"),e.addScope("https://www.googleapis.com/auth/gmail.readonly");try{await (0,o.rh)(a.I,e)}catch(e){console.error("Popup login failed:",e),l(!1)}},h=async()=>{await (0,o.w7)(a.I);try{await fetch("/api/auth/signout",{method:"POST"}),console.log("Session cookie cleared successfully.")}catch(e){console.error("Failed to clear session cookie:",e)}};return(0,r.jsx)(c.Provider,{value:{user:n,loading:u,login:d,logout:h},children:t})},u=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7524:function(e,t,n){"use strict";n.d(t,{Providers:function(){return l}});var r=n(7437),s=n(2351),o=n(9376),a=n(2265);let c=["/dashboard"],i=["/"];function u(e){let{children:t}=e,{user:n,loading:u}=(0,s.a)(),l=(0,o.useRouter)(),d=(0,o.usePathname)();return((0,a.useEffect)(()=>{if(u)return;let e=c.includes(d),t=i.includes(d);!n&&e&&l.push("/"),n&&t&&l.push("/dashboard")},[n,u,l,d]),u)?(0,r.jsx)("div",{className:"h-screen w-full flex items-center justify-center bg-background-color text-text-color",children:"Laddar..."}):!n&&c.includes(d)||n&&i.includes(d)?null:(0,r.jsx)(r.Fragment,{children:t})}function l(e){let{children:t}=e;return(0,r.jsx)(s.H,{children:(0,r.jsx)(u,{children:t})})}},307:function(e,t,n){"use strict";let r,s;n.d(t,{I:function(){return s}});var o=n(738),a=n(3301),c=n(5978);r=(0,o.C6)().length?(0,o.Mq)():(0,o.ZF)({apiKey:"AIzaSyCx5NZTK6qPpj_WQpismfs92-klcxC0-Lc",authDomain:"digi-dan.firebaseapp.com",projectId:"digi-dan",storageBucket:"digi-dan.firebasestorage.app",messagingSenderId:"975739376169",appId:"1:975739376169:web:44422ef57244eeb3a3c238"}),s=(0,a.v0)(r),(0,c.ad)(r)},2778:function(){},9974:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(e){e.O(0,[635,358,139,943,971,117,744],function(){return e(e.s=7497)}),_N_E=e.O()}]);